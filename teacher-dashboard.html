<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Dashboard - Brainfield CBT System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <style>
        /* Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #1a4b8c;
            --secondary: #f37b21;
            --accent: #34a853;
            --light: #f8f9fa;
            --dark: #343a40;
            --danger: #dc3545;
            --warning: #ffc107;
        }

        body {
            line-height: 1.6;
            color: #333;
            background-color: #f5f7fa;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        .btn {
            display: inline-block;
            padding: 10px 20px;
            background-color: var(--secondary);
            color: white;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .btn:hover {
            background-color: #e06e1d;
            transform: translateY(-2px);
        }

        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--secondary);
            color: var(--secondary);
        }

        .btn-outline:hover {
            background-color: var(--secondary);
            color: white;
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 0.8rem;
        }

        .btn-success {
            background-color: var(--accent);
        }

        .btn-success:hover {
            background-color: #2c8e46;
        }

        .btn-primary {
            background-color: var(--primary);
        }

        .btn-primary:hover {
            background-color: #153e75;
        }

        /* Header Styles */
        header {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .logo-text span {
            color: var(--secondary);
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-info {
            text-align: right;
        }

        .user-name {
            font-weight: 600;
            color: var(--dark);
        }

        .user-role {
            font-size: 0.8rem;
            color: #666;
        }

        .logout-btn {
            color: var(--danger);
            text-decoration: none;
            font-size: 0.9rem;
        }

        /* Dashboard Layout */
        .dashboard {
            display: flex;
            flex: 1;
        }

        /* Sidebar */
        .sidebar {
            width: 250px;
            background-color: var(--primary);
            color: white;
            padding: 20px 0;
            height: calc(100vh - 80px);
            position: sticky;
            top: 80px;
        }

        .sidebar-menu {
            list-style: none;
        }

        .sidebar-menu li {
            margin-bottom: 5px;
        }

        .sidebar-menu a {
            display: block;
            padding: 12px 20px;
            color: white;
            text-decoration: none;
            transition: all 0.3s;
            border-left: 4px solid transparent;
        }

        .sidebar-menu a:hover, 
        .sidebar-menu a.active {
            background-color: rgba(255, 255, 255, 0.1);
            border-left-color: var(--secondary);
        }

        .sidebar-menu i {
            width: 25px;
            margin-right: 10px;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 30px;
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .page-title {
            font-size: 1.8rem;
            color: var(--primary);
        }

        /* Dashboard Cards */
        .stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 1.5rem;
            color: white;
        }

        .stat-icon.classes {
            background-color: var(--primary);
        }

        .stat-icon.submissions {
            background-color: var(--secondary);
        }

        .stat-icon.grading {
            background-color: var(--accent);
        }

        .stat-info h3 {
            font-size: 1.8rem;
            margin-bottom: 5px;
        }

        .stat-info p {
            color: #666;
            font-size: 0.9rem;
        }

        /* Content Sections */
        .content-section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .section-title {
            font-size: 1.3rem;
            color: var(--primary);
        }

        /* Lists */
        .item-list {
            list-style: none;
        }

        .item-list li {
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .item-list li:last-child {
            border-bottom: none;
        }

        .item-info h4 {
            margin-bottom: 5px;
            color: var(--dark);
        }

        .item-info p {
            font-size: 0.9rem;
            color: #666;
        }

        .item-status {
            font-size: 0.8rem;
            padding: 5px 10px;
            border-radius: 20px;
            font-weight: 600;
        }

        .status-pending {
            background-color: #fff3cd;
            color: #856404;
        }

        .status-completed {
            background-color: #d4edda;
            color: #155724;
        }

        .status-missing {
            background-color: #f8d7da;
            color: #721c24;
        }

        .status-inprogress {
            background-color: #cce5ff;
            color: #004085;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            overflow-y: auto;
        }

        .modal-content {
            background-color: white;
            margin: 50px auto;
            border-radius: 10px;
            width: 90%;
            max-width: 800px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            animation: modalFadeIn 0.3s;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.5rem;
            color: var(--primary);
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #999;
        }

        .close-modal:hover {
            color: var(--dark);
        }

        .modal-body {
            padding: 20px;
            max-height: 70vh;
            overflow-y: auto;
        }

        .modal-footer {
            padding: 20px;
            border-top: 1px solid #eee;
            text-align: right;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-control:focus {
            border-color: var(--secondary);
            outline: none;
        }

        select.form-control {
            height: 46px;
        }

        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }

        /* Table Styles */
        .table-responsive {
            overflow-x: auto;
            width: 100%;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .data-table th,
        .data-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .data-table th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: var(--primary);
        }

        .data-table tr:hover {
            background-color: #f8f9fa;
        }

        /* Alert Styles */
        .alert {
            padding: 12px 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }

        .alert-error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .alert-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            border-bottom-color: var(--secondary);
            color: var(--secondary);
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Footer */
        footer {
            background-color: var(--dark);
            color: white;
            padding: 30px 0 20px;
            margin-top: auto;
        }

        .copyright {
            text-align: center;
            font-size: 0.9rem;
            opacity: 0.7;
        }

        /* Question Builder */
        .question-builder {
            border: 1px solid #eee;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .option-row {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .option-row input[type="text"] {
            flex: 1;
            margin-right: 10px;
        }

        .option-row input[type="radio"] {
            margin-right: 10px;
        }

        .add-option {
            margin-bottom: 15px;
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            .dashboard {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                position: static;
            }
            
            .sidebar-menu {
                display: flex;
                overflow-x: auto;
            }
            
            .sidebar-menu li {
                margin-bottom: 0;
                flex-shrink: 0;
            }
            
            .sidebar-menu a {
                border-left: none;
                border-bottom: 4px solid transparent;
            }
            
            .sidebar-menu a:hover, 
            .sidebar-menu a.active {
                border-left-color: transparent;
                border-bottom-color: var(--secondary);
            }
        }

        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                text-align: center;
                gap: 10px;
            }
            
            .user-info {
                text-align: center;
            }
            
            .stats-cards {
                grid-template-columns: 1fr;
            }
            
            .page-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .item-list li {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .item-actions {
                align-self: flex-end;
            }
            
            .modal-content {
                width: 95%;
                margin: 20px auto;
            }
        }
    </style>
    
    <script>
        // Firebase configuration - Replace with your actual config
        const firebaseConfig = {
  apiKey: "AIzaSyCk4OXci0l9WNJHRjSQ3ylpMpG0k9q1vOI",
  authDomain: "brainfield-schools.firebaseapp.com",
  projectId: "brainfield-schools",
  storageBucket: "brainfield-schools.firebasestorage.app",
  messagingSenderId: "147221931117",
  appId: "1:147221931117:web:8bb22a18b6ce725c510b64",
  measurementId: "G-SQ5VPJLYJW"
};
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
    </script>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-container">
            <div class="logo">
                <div class="logo-text">Brainfield International <span>Schools</span></div>
            </div>
            
            <div class="user-menu">
                <div class="user-info">
                    <div class="user-name" id="userName">Teacher Name</div>
                    <div class="user-role">Teacher</div>
                </div>
                <a href="login.html" id="logoutButton" class="logout-btn">Logout</a>
            </div>
        </div>
    </header>

    <!-- Dashboard -->
    <div class="dashboard container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <ul class="sidebar-menu">
                <li><a href="#" class="active" data-section="dashboard"><i class="fas fa-home"></i> Dashboard</a></li>
                <li><a href="#" data-section="classes"><i class="fas fa-users"></i> My Classes</a></li>
                <li><a href="#" data-section="exams"><i class="fas fa-file-alt"></i> Exams</a></li>
                <li><a href="#" data-section="assignments"><i class="fas fa-tasks"></i> Assignments</a></li>
                <li><a href="#" data-section="submissions"><i class="fas fa-inbox"></i> Submissions</a></li>
                <li><a href="#" data-section="grading"><i class="fas fa-check-circle"></i> Grading</a></li>
                <li><a href="#" data-section="profile"><i class="fas fa-user"></i> Profile</a></li>
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Section -->
            <div id="dashboard-section">
                <div class="page-header">
                    <h1 class="page-title">Teacher Dashboard</h1>
                    <div class="date-display" id="currentDate">Monday, January 1, 2025</div>
                </div>

                <div class="alert alert-info" id="welcomeAlert">
                    Welcome back! You have <span id="pendingSubmissions">0</span> submissions awaiting grading.
                </div>

                <!-- Stats Cards -->
                <div class="stats-cards">
                    <div class="stat-card">
                        <div class="stat-icon classes">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="classCount">0</h3>
                            <p>Classes</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon submissions">
                            <i class="fas fa-inbox"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="submissionCount">0</h3>
                            <p>Pending Submissions</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon grading">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="gradingCount">0</h3>
                            <p>Graded This Week</p>
                        </div>
                    </div>
                </div>

                <!-- Recent Submissions -->
                <div class="content-section">
                    <div class="section-header">
                        <h2 class="section-title">Recent Submissions</h2>
                        <a href="#" class="btn btn-sm" data-section="submissions">View All</a>
                    </div>
                    
                    <ul class="item-list" id="recentSubmissionsList">
                        <li>
                            <div class="item-info">
                                <h4>No recent submissions</h4>
                                <p>Student submissions will appear here</p>
                            </div>
                        </li>
                    </ul>
                </div>

                <!-- Upcoming Deadlines -->
                <div class="content-section">
                    <div class="section-header">
                        <h2 class="section-title">Upcoming Deadlines</h2>
                    </div>
                    
                    <ul class="item-list" id="upcomingDeadlinesList">
                        <li>
                            <div class="item-info">
                                <h4>No upcoming deadlines</h4>
                                <p>Assignment and exam deadlines will appear here</p>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Classes Section -->
            <div id="classes-section" style="display: none;">
                <div class="page-header">
                    <h1 class="page-title">My Classes</h1>
                    <button class="btn btn-primary" id="createClassBtn">Create Class</button>
                </div>

                <div class="content-section">
                    <div class="section-header">
                        <h2 class="section-title">Class List</h2>
                    </div>
                    
                    <div class="table-responsive">
                        <table class="data-table" id="classesTable">
                            <thead>
                                <tr>
                                    <th>Class Name</th>
                                    <th>Subject</th>
                                    <th>Students</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="4" style="text-align: center;">No classes found</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Exams Section -->
            <div id="exams-section" style="display: none;">
                <div class="page-header">
                    <h1 class="page-title">Exams</h1>
                    <button class="btn btn-primary" id="createExamBtn">Create Exam</button>
                </div>

                <div class="tabs">
                    <div class="tab active" data-tab="active-exams">Active Exams</div>
                    <div class="tab" data-tab="upcoming-exams">Upcoming Exams</div>
                    <div class="tab" data-tab="completed-exams">Completed Exams</div>
                </div>

                <div class="tab-content active" id="active-exams">
                    <div class="content-section">
                        <div class="table-responsive">
                            <table class="data-table" id="activeExamsTable">
                                <thead>
                                    <tr>
                                        <th>Exam Title</th>
                                        <th>Subject</th>
                                        <th>Class</th>
                                        <th>End Date</th>
                                        <th>Submissions</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="6" style="text-align: center;">No active exams</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="upcoming-exams">
                    <div class="content-section">
                        <div class="table-responsive">
                            <table class="data-table" id="upcomingExamsTable">
                                <thead>
                                    <tr>
                                        <th>Exam Title</th>
                                        <th>Subject</th>
                                        <th>Class</th>
                                        <th>Start Date</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="5" style="text-align: center;">No upcoming exams</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="completed-exams">
                    <div class="content-section">
                        <div class="table-responsive">
                            <table class="data-table" id="completedExamsTable">
                                <thead>
                                    <tr>
                                        <th>Exam Title</th>
                                        <th>Subject</th>
                                        <th>Class</th>
                                        <th>End Date</th>
                                        <th>Submissions</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="6" style="text-align: center;">No completed exams</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Assignments Section -->
            <div id="assignments-section" style="display: none;">
                <div class="page-header">
                    <h1 class="page-title">Assignments</h1>
                    <button class="btn btn-primary" id="createAssignmentBtn">Create Assignment</button>
                </div>

                <div class="tabs">
                    <div class="tab active" data-tab="active-assignments">Active Assignments</div>
                    <div class="tab" data-tab="upcoming-assignments">Upcoming Assignments</div>
                    <div class="tab" data-tab="completed-assignments">Completed Assignments</div>
                </div>

                <div class="tab-content active" id="active-assignments">
                    <div class="content-section">
                        <div class="table-responsive">
                            <table class="data-table" id="activeAssignmentsTable">
                                <thead>
                                    <tr>
                                        <th>Assignment Title</th>
                                        <th>Subject</th>
                                        <th>Class</th>
                                        <th>Due Date</th>
                                        <th>Submissions</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="6" style="text-align: center;">No active assignments</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="upcoming-assignments">
                    <div class="content-section">
                        <div class="table-responsive">
                            <table class="data-table" id="upcomingAssignmentsTable">
                                <thead>
                                    <tr>
                                        <th>Assignment Title</th>
                                        <th>Subject</th>
                                        <th>Class</th>
                                        <th>Due Date</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="5" style="text-align: center;">No upcoming assignments</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="completed-assignments">
                    <div class="content-section">
                        <div class="table-responsive">
                            <table class="data-table" id="completedAssignmentsTable">
                                <thead>
                                    <tr>
                                        <th>Assignment Title</th>
                                        <th>Subject</th>
                                        <th>Class</th>
                                        <th>Due Date</th>
                                        <th>Submissions</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="6" style="text-align: center;">No completed assignments</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Submissions Section -->
            <div id="submissions-section" style="display: none;">
                <div class="page-header">
                    <h1 class="page-title">Submissions</h1>
                </div>

                <div class="tabs">
                    <div class="tab active" data-tab="exam-submissions">Exam Submissions</div>
                    <div class="tab" data-tab="assignment-submissions">Assignment Submissions</div>
                </div>

                <div class="tab-content active" id="exam-submissions">
                    <div class="content-section">
                        <div class="table-responsive">
                            <table class="data-table" id="examSubmissionsTable">
                                <thead>
                                    <tr>
                                        <th>Student</th>
                                        <th>Exam</th>
                                        <th>Subject</th>
                                        <th>Class</th>
                                        <th>Submitted</th>
                                        <th>Score</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="8" style="text-align: center;">No exam submissions</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="assignment-submissions">
                    <div class="content-section">
                        <div class="table-responsive">
                            <table class="data-table" id="assignmentSubmissionsTable">
                                <thead>
                                    <tr>
                                        <th>Student</th>
                                        <th>Assignment</th>
                                        <th>Subject</th>
                                        <th>Class</th>
                                        <th>Submitted</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="7" style="text-align: center;">No assignment submissions</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Grading Section -->
            <div id="grading-section" style="display: none;">
                <div class="page-header">
                    <h1 class="page-title">Grading</h1>
                </div>

                <div class="content-section">
                    <div class="section-header">
                        <h2 class="section-title">Submissions Requiring Grading</h2>
                    </div>
                    
                    <div class="table-responsive">
                        <table class="data-table" id="gradingTable">
                            <thead>
                                <tr>
                                    <th>Student</th>
                                    <th>Title</th>
                                    <th>Type</th>
                                    <th>Subject</th>
                                    <th>Class</th>
                                    <th>Submitted</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="7" style="text-align: center;">No submissions require grading</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Profile Section -->
            <div id="profile-section" style="display: none;">
                <div class="page-header">
                    <h1 class="page-title">Profile</h1>
                </div>

                <div class="content-section">
                    <div class="section-header">
                        <h2 class="section-title">Personal Information</h2>
                    </div>
                    
                    <div id="profileInfo">
                        <div class="alert alert-info">
                            <i class="fas fa-spinner fa-spin"></i> Loading profile information...
                        </div>
                    </div>
                </div>

                <div class="content-section">
                    <div class="section-header">
                        <h2 class="section-title">Assigned Subjects & Classes</h2>
                    </div>
                    
                    <div id="assignedClasses">
                        <div class="alert alert-info">
                            <i class="fas fa-spinner fa-spin"></i> Loading assigned classes...
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Create Exam Modal -->
    <div class="modal" id="createExamModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Create New Exam</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="examForm">
                    <div class="form-group">
                        <label for="examTitle">Exam Title</label>
                        <input type="text" id="examTitle" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label for="examSubject">Subject</label>
                        <select id="examSubject" class="form-control" required>
                            <option value="">Select Subject</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="examClass">Class</label>
                        <select id="examClass" class="form-control" required>
                            <option value="">Select Class</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="examInstructions">Instructions</label>
                        <textarea id="examInstructions" class="form-control"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="examTimeLimit">Time Limit (minutes)</label>
                        <input type="number" id="examTimeLimit" class="form-control" min="1" required>
                    </div>

                    <div class="form-group">
                        <label for="examStartDate">Start Date & Time</label>
                        <input type="datetime-local" id="examStartDate" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label for="examEndDate">End Date & Time</label>
                        <input type="datetime-local" id="examEndDate" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label>Questions</label>
                        <div id="examQuestions">
                            <!-- Questions will be added here -->
                        </div>
                        <button type="button" class="btn btn-outline btn-sm" id="addQuestionBtn">Add Question</button>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelExam">Cancel</button>
                <button class="btn btn-success" id="saveExam">Save Exam</button>
            </div>
        </div>
    </div>

    <!-- Create Assignment Modal -->
    <div class="modal" id="createAssignmentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Create New Assignment</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="assignmentForm">
                    <div class="form-group">
                        <label for="assignmentTitle">Assignment Title</label>
                        <input type="text" id="assignmentTitle" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label for="assignmentSubject">Subject</label>
                        <select id="assignmentSubject" class="form-control" required>
                            <option value="">Select Subject</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="assignmentClass">Class</label>
                        <select id="assignmentClass" class="form-control" required>
                            <option value="">Select Class</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="assignmentInstructions">Instructions</label>
                        <textarea id="assignmentInstructions" class="form-control"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="assignmentDueDate">Due Date</label>
                        <input type="datetime-local" id="assignmentDueDate" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label for="assignmentMaxScore">Maximum Score</label>
                        <input type="number" id="assignmentMaxScore" class="form-control" min="1" required>
                    </div>

                    <div class="form-group">
                        <label for="assignmentFile">Attachment (Optional)</label>
                        <input type="file" id="assignmentFile" class="form-control">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelAssignment">Cancel</button>
                <button class="btn btn-success" id="saveAssignment">Save Assignment</button>
            </div>
        </div>
    </div>

    <!-- Grading Modal -->
    <div class="modal" id="gradingModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="gradingModalTitle">Grade Submission</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="gradingContent">
                    <!-- Grading content will be loaded here -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelGrading">Cancel</button>
                <button class="btn btn-success" id="saveGrading">Save Grade</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="copyright">
                <p>&copy; 2025 Brainfield School. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // DOM Elements
        const sidebarLinks = document.querySelectorAll('.sidebar-menu a');
        const contentSections = document.querySelectorAll('.main-content > div');
        const logoutButton = document.getElementById('logoutButton');
        const userNameElement = document.getElementById('userName');
        const currentDateElement = document.getElementById('currentDate');
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        
        // Modal Elements
        const createExamModal = document.getElementById('createExamModal');
        const createAssignmentModal = document.getElementById('createAssignmentModal');
        const gradingModal = document.getElementById('gradingModal');
        const closeModalButtons = document.querySelectorAll('.close-modal, #cancelExam, #cancelAssignment, #cancelGrading');
        
        // Firebase Auth State Listener
        let currentUser = null;
        let teacherData = null;
        
        auth.onAuthStateChanged(async (user) => {
            if (user) {
                try {
                    // Get teacher data from Firestore
                    const teacherDoc = await db.collection('teachers').doc(user.uid).get();
                    
                    if (teacherDoc.exists) {
                        teacherData = teacherDoc.data();
                        teacherData.id = teacherDoc.id;
                        currentUser = user;
                        
                        // Update UI with teacher info
                        userNameElement.textContent = teacherData.name;
                        
                        // Store user data in localStorage
                        localStorage.setItem('currentUser', JSON.stringify({
                            type: 'teacher',
                            id: teacherData.id,
                            uid: user.uid,
                            name: teacherData.name,
                            subjects: teacherData.subjects,
                            classes: teacherData.classes
                        }));
                        
                        // Load teacher data
                        loadTeacherData();
                    } else {
                        // If user doesn't exist in teachers collection, log them out
                        await auth.signOut();
                        window.location.href = 'login.html';
                    }
                } catch (error) {
                    console.error('Auth state change error:', error);
                    await auth.signOut();
                    window.location.href = 'login.html';
                }
            } else {
                // User is not logged in, redirect to login
                window.location.href = 'login.html';
            }
        });
        
        // Load teacher data from Firestore
        async function loadTeacherData() {
            try {
                // Display current date
                const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                const currentDate = new Date().toLocaleDateString('en-US', options);
                currentDateElement.textContent = currentDate;
                
                // Load classes, exams, assignments, submissions, and profile
                await loadClasses();
                await loadExams();
                await loadAssignments();
                await loadSubmissions();
                await loadGrading();
                await loadProfile();
                
            } catch (error) {
                console.error('Error loading teacher data:', error);
            }
        }
        
        // Load classes data
        async function loadClasses() {
            try {
                if (!teacherData.classes || teacherData.classes.length === 0) {
                    document.getElementById('classCount').textContent = '0';
                    return;
                }
                
                // Get classes data
                const classesPromises = teacherData.classes.map(async (classId) => {
                    const classDoc = await db.collection('classes').doc(classId).get();
                    if (classDoc.exists) {
                        return { id: classDoc.id, ...classDoc.data() };
                    }
                    return null;
                });
                
                const classes = (await Promise.all(classesPromises)).filter(cls => cls !== null);
                
                // Update UI with classes data
                document.getElementById('classCount').textContent = classes.length;
                
                // Update classes table
                const classesTable = document.getElementById('classesTable');
                if (classes.length === 0) {
                    classesTable.innerHTML = '<tr><td colspan="4" style="text-align: center;">No classes found</td></tr>';
                } else {
                    let tableHTML = '';
                    classes.forEach(cls => {
                        tableHTML += `
                            <tr>
                                <td>${cls.name}</td>
                                <td>${cls.subject || 'N/A'}</td>
                                <td>${cls.studentCount || 0} students</td>
                                <td>
                                    <button class="btn btn-sm btn-outline view-class" data-class-id="${cls.id}">View</button>
                                </td>
                            </tr>
                        `;
                    });
                    classesTable.innerHTML = tableHTML;
                }
                
            } catch (error) {
                console.error('Error loading classes:', error);
            }
        }
        
        // Load exams data
        async function loadExams() {
            try {
                if (!teacherData.subjects || teacherData.subjects.length === 0) {
                    return;
                }
                
                // Get exams created by this teacher
                const examsSnapshot = await db.collection('exams')
                    .where('teacherId', '==', currentUser.uid)
                    .orderBy('createdAt', 'desc')
                    .get();
                
                const activeExams = [];
                const upcomingExams = [];
                const completedExams = [];
                const now = new Date();
                
                examsSnapshot.forEach(doc => {
                    const exam = doc.data();
                    exam.id = doc.id;
                    
                    const startDate = exam.startDate.toDate();
                    const endDate = exam.endDate.toDate();
                    
                    if (now > endDate) {
                        completedExams.push(exam);
                    } else if (now >= startDate && now <= endDate) {
                        activeExams.push(exam);
                    } else if (now < startDate) {
                        upcomingExams.push(exam);
                    }
                });
                
                // Update UI with exams data
                updateExamsUI(activeExams, upcomingExams, completedExams);
                
            } catch (error) {
                console.error('Error loading exams:', error);
            }
        }
        
        // Update exams UI
        function updateExamsUI(activeExams, upcomingExams, completedExams) {
            // Update active exams table
            const activeExamsTable = document.getElementById('activeExamsTable');
            if (activeExams.length === 0) {
                activeExamsTable.innerHTML = '<tr><td colspan="6" style="text-align: center;">No active exams</td></tr>';
            } else {
                let tableHTML = '';
                activeExams.forEach(exam => {
                    const endDate = exam.endDate.toDate();
                    tableHTML += `
                        <tr>
                            <td>${exam.title}</td>
                            <td>${exam.subject}</td>
                            <td>${exam.class}</td>
                            <td>${endDate.toLocaleDateString()}</td>
                            <td>${exam.submissionCount || 0} / ${exam.studentCount || 0}</td>
                            <td>
                                <button class="btn btn-sm btn-outline view-exam" data-exam-id="${exam.id}">View</button>
                            </td>
                        </tr>
                    `;
                });
                activeExamsTable.innerHTML = tableHTML;
            }
            
            // Update upcoming exams table
            const upcomingExamsTable = document.getElementById('upcomingExamsTable');
            if (upcomingExams.length === 0) {
                upcomingExamsTable.innerHTML = '<tr><td colspan="5" style="text-align: center;">No upcoming exams</td></tr>';
            } else {
                let tableHTML = '';
                upcomingExams.forEach(exam => {
                    const startDate = exam.startDate.toDate();
                    tableHTML += `
                        <tr>
                            <td>${exam.title}</td>
                            <td>${exam.subject}</td>
                            <td>${exam.class}</td>
                            <td>${startDate.toLocaleDateString()}</td>
                            <td>
                                <button class="btn btn-sm btn-outline view-exam" data-exam-id="${exam.id}">View</button>
                            </td>
                        </tr>
                    `;
                });
                upcomingExamsTable.innerHTML = tableHTML;
            }
            
            // Update completed exams table
            const completedExamsTable = document.getElementById('completedExamsTable');
            if (completedExams.length === 0) {
                completedExamsTable.innerHTML = '<tr><td colspan="6" style="text-align: center;">No completed exams</td></tr>';
            } else {
                let tableHTML = '';
                completedExams.forEach(exam => {
                    const endDate = exam.endDate.toDate();
                    tableHTML += `
                        <tr>
                            <td>${exam.title}</td>
                            <td>${exam.subject}</td>
                            <td>${exam.class}</td>
                            <td>${endDate.toLocaleDateString()}</td>
                            <td>${exam.submissionCount || 0} / ${exam.studentCount || 0}</td>
                            <td>
                                <button class="btn btn-sm btn-outline view-exam" data-exam-id="${exam.id}">View</button>
                            </td>
                        </tr>
                    `;
                });
                completedExamsTable.innerHTML = tableHTML;
            }
        }
        
        // Load assignments data
        async function loadAssignments() {
            // Implementation for loading assignments
        }
        
        // Load submissions data
        async function loadSubmissions() {
            // Implementation for loading submissions
        }
        
        // Load grading data
        async function loadGrading() {
            // Implementation for loading grading queue
        }
        
        // Load profile data
        async function loadProfile() {
            // Implementation for loading profile
        }
        
        // Create exam
        document.getElementById('createExamBtn').addEventListener('click', function() {
            // Populate subjects and classes dropdowns
            populateSubjectAndClassDropdowns();
            
            // Show modal
            createExamModal.style.display = 'block';
        });
        
        // Populate subject and class dropdowns
        function populateSubjectAndClassDropdowns() {
            const subjectSelect = document.getElementById('examSubject');
            const classSelect = document.getElementById('examClass');
            
            // Clear existing options
            subjectSelect.innerHTML = '<option value="">Select Subject</option>';
            classSelect.innerHTML = '<option value="">Select Class</option>';
            
            // Add subjects
            if (teacherData.subjects && teacherData.subjects.length > 0) {
                teacherData.subjects.forEach(subject => {
                    subjectSelect.innerHTML += `<option value="${subject}">${subject}</option>`;
                });
            }
            
            // Add classes
            if (teacherData.classes && teacherData.classes.length > 0) {
                // We need to fetch class names from Firestore
                teacherData.classes.forEach(async (classId) => {
                    const classDoc = await db.collection('classes').doc(classId).get();
                    if (classDoc.exists) {
                        const classData = classDoc.data();
                        classSelect.innerHTML += `<option value="${classId}">${classData.name}</option>`;
                    }
                });
            }
        }
        
        // Add question to exam
        document.getElementById('addQuestionBtn').addEventListener('click', function() {
            const questionsContainer = document.getElementById('examQuestions');
            const questionCount = questionsContainer.children.length;
            
            const questionHTML = `
                <div class="question-builder" data-question-index="${questionCount}">
                    <div class="form-group">
                        <label>Question ${questionCount + 1}</label>
                        <input type="text" class="form-control" placeholder="Enter question" required>
                    </div>
                    <div class="form-group">
                        <label>Question Type</label>
                        <select class="form-control question-type">
                            <option value="multiple-choice">Multiple Choice</option>
                            <option value="true-false">True/False</option>
                            <option value="short-answer">Short Answer</option>
                            <option value="essay">Essay</option>
                        </select>
                    </div>
                    <div class="options-container">
                        <div class="option-row">
                            <input type="text" class="form-control" placeholder="Option 1">
                            <input type="radio" name="correct-answer-${questionCount}" value="0" checked>
                            <label>Correct</label>
                        </div>
                        <div class="option-row">
                            <input type="text" class="form-control" placeholder="Option 2">
                            <input type="radio" name="correct-answer-${questionCount}" value="1">
                            <label>Correct</label>
                        </div>
                    </div>
                    <button type="button" class="btn btn-outline btn-sm add-option">Add Option</button>
                    <button type="button" class="btn btn-outline btn-sm remove-question" style="float: right;">Remove Question</button>
                </div>
            `;
            
            questionsContainer.innerHTML += questionHTML;
            
            // Add event listeners for the new question
            const newQuestion = questionsContainer.lastElementChild;
            newQuestion.querySelector('.question-type').addEventListener('change', function() {
                handleQuestionTypeChange(this);
            });
            
            newQuestion.querySelector('.add-option').addEventListener('click', function() {
                addOption(this);
            });
            
            newQuestion.querySelector('.remove-question').addEventListener('click', function() {
                this.closest('.question-builder').remove();
                renumberQuestions();
            });
        });
        
        // Handle question type change
        function handleQuestionTypeChange(selectElement) {
            const questionDiv = selectElement.closest('.question-builder');
            const optionsContainer = questionDiv.querySelector('.options-container');
            const addOptionBtn = questionDiv.querySelector('.add-option');
            
            if (selectElement.value === 'multiple-choice' || selectElement.value === 'true-false') {
                optionsContainer.style.display = 'block';
                addOptionBtn.style.display = 'block';
                
                if (selectElement.value === 'true-false') {
                    optionsContainer.innerHTML = `
                        <div class="option-row">
                            <input type="text" class="form-control" value="True" readonly>
                            <input type="radio" name="${selectElement.name}" value="0" checked>
                            <label>Correct</label>
                        </div>
                        <div class="option-row">
                            <input type="text" class="form-control" value="False" readonly>
                            <input type="radio" name="${selectElement.name}" value="1">
                            <label>Correct</label>
                        </div>
                    `;
                }
            } else {
                optionsContainer.style.display = 'none';
                addOptionBtn.style.display = 'none';
            }
        }
        
        // Add option to question
        function addOption(button) {
            const questionDiv = button.closest('.question-builder');
            const optionsContainer = questionDiv.querySelector('.options-container');
            const optionCount = optionsContainer.children.length;
            const questionIndex = questionDiv.getAttribute('data-question-index');
            
            const optionHTML = `
                <div class="option-row">
                    <input type="text" class="form-control" placeholder="Option ${optionCount + 1}">
                    <input type="radio" name="correct-answer-${questionIndex}" value="${optionCount}">
                    <label>Correct</label>
                    <button type="button" class="btn btn-outline btn-sm remove-option">Remove</button>
                </div>
            `;
            
            optionsContainer.innerHTML += optionHTML;
            
            // Add event listener for remove button
            optionsContainer.lastElementChild.querySelector('.remove-option').addEventListener('click', function() {
                this.closest('.option-row').remove();
            });
        }
        
        // Renumber questions after removal
        function renumberQuestions() {
            const questions = document.querySelectorAll('.question-builder');
            questions.forEach((question, index) => {
                question.setAttribute('data-question-index', index);
                question.querySelector('label').textContent = `Question ${index + 1}`;
                
                // Update radio button names
                const radioButtons = question.querySelectorAll('input[type="radio"]');
                radioButtons.forEach(radio => {
                    radio.name = `correct-answer-${index}`;
                });
            });
        }
        
        // Save exam
        document.getElementById('saveExam').addEventListener('click', async function() {
            try {
                // Validate form
                const examTitle = document.getElementById('examTitle').value;
                const examSubject = document.getElementById('examSubject').value;
                const examClass = document.getElementById('examClass').value;
                const examTimeLimit = document.getElementById('examTimeLimit').value;
                const examStartDate = document.getElementById('examStartDate').value;
                const examEndDate = document.getElementById('examEndDate').value;
                
                if (!examTitle || !examSubject || !examClass || !examTimeLimit || !examStartDate || !examEndDate) {
                    alert('Please fill in all required fields');
                    return;
                }
                
                // Collect questions
                const questions = [];
                const questionElements = document.querySelectorAll('.question-builder');
                
                if (questionElements.length === 0) {
                    alert('Please add at least one question');
                    return;
                }
                
                questionElements.forEach(questionElement => {
                    const questionText = questionElement.querySelector('input[type="text"]').value;
                    const questionType = questionElement.querySelector('.question-type').value;
                    
                    if (!questionText) {
                        alert('Please fill in all questions');
                        return;
                    }
                    
                    const question = {
                        question: questionText,
                        type: questionType
                    };
                    
                    if (questionType === 'multiple-choice' || questionType === 'true-false') {
                        const options = [];
                        const optionElements = questionElement.querySelectorAll('.option-row');
                        
                        optionElements.forEach(optionElement => {
                            const optionInput = optionElement.querySelector('input[type="text"]');
                            const optionRadio = optionElement.querySelector('input[type="radio"]');
                            
                            if (optionInput) {
                                options.push(optionInput.value);
                                
                                if (optionRadio.checked) {
                                    question.correctAnswer = options.length - 1;
                                }
                            }
                        });
                        
                        question.options = options;
                    }
                    
                    questions.push(question);
                });
                
                // Get class data to determine student count
                const classDoc = await db.collection('classes').doc(examClass).get();
                const classData = classDoc.data();
                
                // Save exam to Firestore
                await db.collection('exams').add({
                    title: examTitle,
                    subject: examSubject,
                    class: examClass,
                    className: classData.name,
                    instructions: document.getElementById('examInstructions').value,
                    timeLimit: parseInt(examTimeLimit),
                    questions: questions,
                    startDate: new Date(examStartDate),
                    endDate: new Date(examEndDate),
                    teacherId: currentUser.uid,
                    teacherName: teacherData.name,
                    studentCount: classData.studentCount || 0,
                    submissionCount: 0,
                    createdAt: new Date(),
                    status: 'active'
                });
                
                // Close modal
                createExamModal.style.display = 'none';
                
                // Show success message
                alert('Exam created successfully!');
                
                // Reload exams data
                loadExams();
                
            } catch (error) {
                console.error('Error creating exam:', error);
                alert('Error creating exam. Please try again.');
            }
        });
        
        // Create assignment
        document.getElementById('createAssignmentBtn').addEventListener('click', function() {
            // Populate subjects and classes dropdowns
            const subjectSelect = document.getElementById('assignmentSubject');
            const classSelect = document.getElementById('assignmentClass');
            
            // Clear existing options
            subjectSelect.innerHTML = '<option value="">Select Subject</option>';
            classSelect.innerHTML = '<option value="">Select Class</option>';
            
            // Add subjects
            if (teacherData.subjects && teacherData.subjects.length > 0) {
                teacherData.subjects.forEach(subject => {
                    subjectSelect.innerHTML += `<option value="${subject}">${subject}</option>`;
                });
            }
            
            // Add classes
            if (teacherData.classes && teacherData.classes.length > 0) {
                teacherData.classes.forEach(async (classId) => {
                    const classDoc = await db.collection('classes').doc(classId).get();
                    if (classDoc.exists) {
                        const classData = classDoc.data();
                        classSelect.innerHTML += `<option value="${classId}">${classData.name}</option>`;
                    }
                });
            }
            
            // Show modal
            createAssignmentModal.style.display = 'block';
        });
        
        // Save assignment
        document.getElementById('saveAssignment').addEventListener('click', async function() {
            try {
                // Validate form
                const assignmentTitle = document.getElementById('assignmentTitle').value;
                const assignmentSubject = document.getElementById('assignmentSubject').value;
                const assignmentClass = document.getElementById('assignmentClass').value;
                const assignmentDueDate = document.getElementById('assignmentDueDate').value;
                const assignmentMaxScore = document.getElementById('assignmentMaxScore').value;
                
                if (!assignmentTitle || !assignmentSubject || !assignmentClass || !assignmentDueDate || !assignmentMaxScore) {
                    alert('Please fill in all required fields');
                    return;
                }
                
                // Get class data to determine student count
                const classDoc = await db.collection('classes').doc(assignmentClass).get();
                const classData = classDoc.data();
                
                // Handle file upload if present
                let fileUrl = null;
                const fileInput = document.getElementById('assignmentFile');
                if (fileInput.files.length > 0) {
                    // Upload file to Firebase Storage
                    const file = fileInput.files[0];
                    const storageRef = storage.ref();
                    const fileRef = storageRef.child(`assignments/${Date.now()}_${file.name}`);
                    const snapshot = await fileRef.put(file);
                    fileUrl = await snapshot.ref.getDownloadURL();
                }
                
                // Save assignment to Firestore
                await db.collection('assignments').add({
                    title: assignmentTitle,
                    subject: assignmentSubject,
                    class: assignmentClass,
                    className: classData.name,
                    instructions: document.getElementById('assignmentInstructions').value,
                    dueDate: new Date(assignmentDueDate),
                    maxScore: parseInt(assignmentMaxScore),
                    attachment: fileUrl,
                    teacherId: currentUser.uid,
                    teacherName: teacherData.name,
                    studentCount: classData.studentCount || 0,
                    submissionCount: 0,
                    createdAt: new Date(),
                    status: 'active'
                });
                
                // Close modal
                createAssignmentModal.style.display = 'none';
                
                // Show success message
                alert('Assignment created successfully!');
                
                // Reload assignments data
                loadAssignments();
                
            } catch (error) {
                console.error('Error creating assignment:', error);
                alert('Error creating assignment. Please try again.');
            }
        });
        
        // Tab navigation
        tabs.forEach(tab => {
            tab.addEventListener('click', function() {
                const tabId = this.getAttribute('data-tab');
                
                // Remove active class from all tabs
                tabs.forEach(t => t.classList.remove('active'));
                
                // Add active class to clicked tab
                this.classList.add('active');
                
                // Hide all tab contents
                tabContents.forEach(content => {
                    content.classList.remove('active');
                });
                
                // Show selected tab content
                document.getElementById(tabId).classList.add('active');
            });
        });
        
        // Navigation
        sidebarLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Remove active class from all links
                sidebarLinks.forEach(l => l.classList.remove('active'));
                
                // Add active class to clicked link
                this.classList.add('active');
                
                // Hide all sections
                contentSections.forEach(section => {
                    section.style.display = 'none';
                });
                
                // Show selected section
                const sectionId = this.getAttribute('data-section') + '-section';
                document.getElementById(sectionId).style.display = 'block';
            });
        });
        
        // Close modal
        closeModalButtons.forEach(button => {
            button.addEventListener('click', function() {
                createExamModal.style.display = 'none';
                createAssignmentModal.style.display = 'none';
                gradingModal.style.display = 'none';
            });
        });
        
        // Logout
        logoutButton.addEventListener('click', async function(e) {
            e.preventDefault();
            
            try {
                await auth.signOut();
                localStorage.removeItem('currentUser');
                window.location.href = 'login.html';
            } catch (error) {
                console.error('Error signing out:', error);
            }
        });
        
        // Close modal if clicked outside
        window.addEventListener('click', function(e) {
            if (e.target === createExamModal) {
                createExamModal.style.display = 'none';
            }
            if (e.target === createAssignmentModal) {
                createAssignmentModal.style.display = 'none';
            }
            if (e.target === gradingModal) {
                gradingModal.style.display = 'none';
            }
        });
    </script>
</body>
</html>